<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html" charset="utf-8" />
	<title>index</title>
	<style type="text/css">
	body{
		font-size:26px;
	}
	#message{
		width:300px;
		height:200px;
		background:#FFFF66;
	}
	</style>
	<script type="text/javascript">
	//post的方式 ajax方式用户名校验
	function checkName(){

		var name = document.getElementById('user_name').value;
		name = encodeURIComponent(name);

		//把用户信息变为"请求字符串"
		var info = "name=" + name + "&age=23";

		//[1]、创建ajax对象
		var xhr = new XMLHttpRequest();

		//[4]、 给ajax设置事件
		xhr.onreadystatechange = function (){
			if(xhr.readyState == 4){
				var oDiv = document.getElementById('message');
				oDiv.innerHTML = xhr.responseText;
			}
		};

		//[2]、创建http请求
		xhr.open('post', './post04.php');

		//post 方式传递数据是模拟form表单传递数据
		//form表单的post格式数据是通过xml形式传递给服务器的
		//xml的方式传递post数据,必须在open后面调用 
		xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded");

		//[3]、发送请求
		xhr.send(info);	

	}
	</script>
</head>
<body>
	<h3>用户名校验POST的方式</h3>
	用户名:<input type="text" id="user_name" onblur="checkName()" /> 
	<div id="message">
	</div>
</body>
</html>
